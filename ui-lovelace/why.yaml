title: Why
path: debugging
badges: []
cards:
  - type: entities
    entities:
      - entity: input_datetime.delay_short
        type: custom:multiple-entity-row
        format: time
      - entity: input_datetime.delay_medium
        type: custom:multiple-entity-row
        format: time
      - entity: input_datetime.delay_long
        type: custom:multiple-entity-row
        format: time
    title: Delays
  - type: custom:auto-entities
    card:
      type: entities
      title: Lights On
    filter:
      include:
        - entity_id: switch.*_light*
          state: 'on'
          options:
            secondary_info: last-changed
        - entity_id: light.*
          state: 'on'
          options:
            secondary_info: last-changed
      exclude: []
  - type: custom:auto-entities
    card:
      type: entities
      title: Lights Off
      show_header_toggle: false
    filter:
      include:
        - entity_id: switch.*_light*
          state: 'off'
          options:
            secondary_info: last-updated
        - entity_id: light.*
          state: 'off'
          options:
            secondary_info: last-updated
      exclude: []
    sort:
      method: none
  - type: custom:auto-entities
    card:
      type: entities
      title: Recent Automations
      show_header_toggle: false
    filter:
      include:
        - domain: script
          not:
            attributes:
              current: 0
          options:
            type: custom:template-entity-row
            active: true
            secondary: '{{ relative_time(state_attr(config.entity, ''last_triggered'')) }} ago'
            state: '{{ state_attr(config.entity, ''current'') }} Running'
            hold_action: |
              {
                "action": "navigate",
                "navigation_path": "/config/script/trace/{{ state_attr(config.entity, 'id') }}"
              }
        - domain: script
          last_triggered: < 5
          options:
            type: custom:template-entity-row
            active: '{{ (state_attr(config.entity, ''current'') | int) > 0 }}'
            secondary: |
              {%- if state_attr(config.entity, 'last_triggered') -%}
                {{ relative_time(state_attr(config.entity, 'last_triggered')) }} ago
              {%- else -%}
                Never triggered
              {%- endif -%}
            state: Not Running
            hold_action: |
              {
                "action": "navigate",
                "navigation_path": "/config/automation/script/{{ state_attr(config.entity, 'id') }}"
              }
        - domain: automation
          not:
            attributes:
              current: 0
          options:
            type: custom:template-entity-row
            active: true
            secondary: '{{ relative_time(state_attr(config.entity, ''last_triggered'')) }} ago'
            state: '{{ state_attr(config.entity, ''current'') }} Running'
            hold_action: |
              {
                "action": "navigate",
                "navigation_path": "/config/automation/trace/{{ state_attr(config.entity, 'id') }}"
              }
        - domain: automation
          last_triggered: < 5
          options:
            type: custom:template-entity-row
            active: '{{ (state_attr(config.entity, ''current'') | int) > 0 }}'
            secondary: |
              {%- if state_attr(config.entity, 'last_triggered') -%}
                {{ relative_time(state_attr(config.entity, 'last_triggered')) }} ago
              {%- else -%}
                Never triggered
              {%- endif -%}
            state: Not Running
            hold_action: |
              {
                "action": "navigate",
                "navigation_path": "/config/automation/trace/{{ state_attr(config.entity, 'id') }}"
              }
    show_empty: false
    unique: entity
    sort:
      method: last_triggered
      reverse: true